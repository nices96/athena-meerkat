{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "UserController",
        "designer|userClassName": "UserController"
    },
    "designerId": "b1f08fb1-34e5-4dc0-83a1-ea6ae4f616ef",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "type",
                    "user_id"
                ],
                "fn": "showUserWindow",
                "implHandler": [
                    "",
                    "var userWindow = Ext.create(\"widget.UserWindow\");",
                    "userWindow.show();",
                    "",
                    "if (type === \"edit\"){",
                    "    userWindow.title = \"Edit User\";",
                    "}"
                ]
            },
            "designerId": "f3478ddc-55c8-4509-a9c8-96eafd0d51ee"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#createBtn",
                "designer|targetType": "Ext.button.Button",
                "fn": "onNewUserButtonClick",
                "implHandler": [
                    "this.showUserWindow(\"new\", 0);"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "90160b86-6a35-4d4e-af26-7fd73a8bffe1"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#mycontainer38",
                "designer|targetType": "Ext.container.Container",
                "fn": "onContainerActivate",
                "implHandler": [
                    "Ext.getStore(\"UserStore\").load();",
                    "Ext.getStore(\"UserRoleStore\").load();"
                ],
                "name": "activate",
                "scope": "me"
            },
            "designerId": "2d1e1a0b-6258-4546-8a1a-0ed568622111"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnCreate",
                "designer|targetType": "Ext.button.Button",
                "fn": "onCreateUserButtonClick",
                "implHandler": [
                    "var form = Ext.getCmp(\"userForm\");\t\t\t// user form",
                    "var formWindow = Ext.getCmp('UserWindow');\t// Add user window",
                    "",
                    "var userName = form.getForm().findField(\"UserIDTextField\");",
                    "var password = form.getForm().findField(\"PasswordTextField\");",
                    "var retype_password = form.getForm().findField(\"RetypePasswordTextField\");",
                    "var fullName = form.getForm().findField(\"FullNameTextField\");",
                    "var email = form.getForm().findField(\"EmailTextField\");",
                    "var userRole = form.getForm().findField(\"UserRoleDropdownList\");",
                    "",
                    "if (password.getValue() !== retype_password.getValue()){",
                    "    Ext.Msg.show({",
                    "        title: \"Message\",",
                    "        msg: \"Password and Retype password are not match.\",",
                    "        buttons: Ext.Msg.OK,",
                    "        fn: function(choice) {",
                    "            password.focus();",
                    "        },",
                    "        icon: Ext.Msg.WARNING",
                    "    });",
                    "    return;",
                    "}",
                    "",
                    "if (userName.getValue() ===\"\" || password.getValue() ===\"\" || retype_password.getValue() ===\"\"||fullName.getValue() ===\"\" ||email.getValue() ===\"\"||userRole.getValue()< 0){",
                    "    Ext.Msg.show({",
                    "        title: \"Message\",",
                    "        msg: \"Invalid data.\",",
                    "        buttons: Ext.Msg.OK,",
                    "        icon: Ext.Msg.WARNING",
                    "    });",
                    "    return;",
                    "}",
                    "",
                    "//submit new user request",
                    "",
                    " Ext.Ajax.request({",
                    "        url: GlobalData.urlPrefix + \"user/new\",",
                    "     params: {\"userID\":userName.getValue(),\"password\":password.getValue(), \"fullName\":fullName.getValue(),\"email\":email.getValue(),\"userRole\":userRole.getValue() },",
                    "        success: function(resp, ops) {",
                    "",
                    "            var response = Ext.decode(resp.responseText);",
                    "            if(response===true){",
                    "                Ext.getStore(\"UserStore\").reload();",
                    "                formWindow.close();",
                    "            }",
                    "            else {",
                    "                     Ext.Msg.show({",
                    "                        title: \"Message\",",
                    "                        msg: \"Invalid information.\",",
                    "                        buttons: Ext.Msg.OK,",
                    "                        icon: Ext.Msg.WARNING",
                    "                    });",
                    "            }",
                    "",
                    "        }",
                    "    });",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "93f9bf02-fb53-40c7-ba45-5296fe7774a9"
        }
    ]
}